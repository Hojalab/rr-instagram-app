<div class="container">
	<div class="row-fluid">
		<div class="span12">
			<h1 class="hidden">Instagram#trending</h1>
			<div class="well well-small">
				<div class="message"></div>
				<div id="map_canvas" style="min-height: 350px;"></div>
			</div>
		</div>
	</div>
</div>
<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=true"></script>
<script src="http://jquery-ui-map.googlecode.com/svn/trunk/ui/min/jquery.ui.map.full.min.js"></script>
<script>
	$(document).ready(function() {
		console.log(document)
		// addMarker returns a jQuery wrapped google.maps.Marker object
		var $marker = null;
		//Get users location
		function getLocation() {
			if(navigator.geolocation) {
				navigator.geolocation.getCurrentPosition(showPosition);
			} else {
				$('.message').html("Geolocation is not supported by this browser.");
			}
		}

		//Place marker on map
		function showPosition(position) {
			//$('.message').html("Latitude: " + position.coords.latitude + "<br>Longitude: " + position.coords.longitude);
			var clientPosition = new google.maps.LatLng(position.coords.latitude, position.coords.longitude);
			$marker = $('#map_canvas').gmap('addMarker', {
				'position' : clientPosition,
				'bounds' : true,
				'zoom' : 10
			});
			$marker.click(function() {
				$('#map_canvas').gmap('openInfoWindow', {
					'content' : 'Hello World!'
				}, this);
			});
			$('#map_canvas').gmap('addShape', 'Circle', {
				'strokeWeight' : 0,
				'fillColor' : "#008595",
				'fillOpacity' : 0.25,
				'center' : clientPosition,
				'radius' : 15,
				'clickable' : false
			});
		}

		//Init map and get users location
		$('#map_canvas').gmap().bind('init', function(evt, map) {
			getLocation();
		});
		
		
	});

</script>
